<div class="dashboard-container">
  <!-- Header -->
  <div class="header">
    <h1>Tableau de bord</h1>
    <p class="welcome-message">Bienvenue, <strong>{{ currentUser?.username }}</strong> !</p>
  </div>

  <!-- Loader -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Chargement des statistiques...</p>
  </div>

  <div *ngIf="!loading && stats">
    <!-- Stats Cards -->
    <div class="stats-grid">
      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon income">
            <mat-icon>trending_up</mat-icon>
          </div>
          <div class="stat-info">
            <h3>Revenus</h3>
            <p class="stat-value">{{ stats.totalIncome | number:'1.2-2' }} €</p>
            <span class="stat-label">Ce mois</span>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon expense">
            <mat-icon>trending_down</mat-icon>
          </div>
          <div class="stat-info">
            <h3>Dépenses</h3>
            <p class="stat-value">{{ stats.totalExpenses | number:'1.2-2' }} €</p>
            <span class="stat-label">Ce mois</span>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon balance">
            <mat-icon>account_balance</mat-icon>
          </div>
          <div class="stat-info">
            <h3>Solde</h3>
            <p class="stat-value" [class.positive]="stats.monthlyBalance >= 0" [class.negative]="stats.monthlyBalance < 0">
              {{ stats.monthlyBalance | number:'1.2-2' }} €
            </p>
            <span class="stat-label">Disponible</span>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-icon savings">
            <mat-icon>savings</mat-icon>
          </div>
          <div class="stat-info">
            <h3>Taux d'épargne</h3>
            <p class="stat-value">{{ stats.savingsRate | number:'1.1-1' }}%</p>
            <span class="stat-label">Ce mois</span>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Charts Grid -->
    <div class="charts-grid">
      <!-- Trends Chart -->
      <mat-card class="chart-card large">
        <mat-card-content>
          <div class="chart-container">
            <canvas #trendsChart></canvas>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Category Chart -->
      <mat-card class="chart-card">
        <mat-card-content>
          <div class="chart-container">
            <canvas #categoryChart></canvas>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Budget Chart -->
      <mat-card class="chart-card">
        <mat-card-content>
          <div class="chart-container">
            <canvas #budgetChart></canvas>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Goals Chart -->
      <mat-card class="chart-card">
        <mat-card-content>
          <div class="chart-container">
            <canvas #goalsChart></canvas>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Top Expenses Chart -->
      <mat-card class="chart-card">
        <mat-card-content>
          <div class="chart-container">
            <canvas #topExpensesChart></canvas>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <h2>Actions rapides</h2>
      <div class="actions-grid">
        <button mat-raised-button color="primary" routerLink="/transactions">
          <mat-icon>add</mat-icon>
          Nouvelle transaction
        </button>
        <button mat-raised-button color="accent" routerLink="/budgets">
          <mat-icon>add</mat-icon>
          Nouveau budget
        </button>
        <button mat-raised-button routerLink="/goals">
          <mat-icon>add</mat-icon>
          Nouvel objectif
        </button>
      </div>
    </div>
  </div>
</div>
